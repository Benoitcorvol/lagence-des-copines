# n8n Environment Variables - L'Agence des Copines Chatbot
# Copy to .env and fill in your actual values

# =============================================================================
# ANTHROPIC CLAUDE API
# =============================================================================
# Get your API key from: https://console.anthropic.com/settings/keys
ANTHROPIC_API_KEY=sk-ant-api03-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# =============================================================================
# SUPABASE
# =============================================================================
# Project URL (from Supabase dashboard)
SUPABASE_URL=https://tqwmtrhfzaugkrwjcofq.supabase.co

# Service role key (from Supabase Settings → API)
# WARNING: Keep this secret! Full database access
SUPABASE_SERVICE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# Database connection (for PostgreSQL nodes in n8n)
SUPABASE_DB_HOST=db.tqwmtrhfzaugkrwjcofq.supabase.co
SUPABASE_DB_PORT=5432
SUPABASE_DB_NAME=postgres
SUPABASE_DB_USER=postgres
SUPABASE_DB_PASSWORD=your-supabase-db-password

# =============================================================================
# RATE LIMITING
# =============================================================================
# Maximum messages per minute per conversation
RATE_LIMIT_PER_MINUTE=10

# =============================================================================
# CLAUDE API SETTINGS
# =============================================================================
# Model to use (see: https://docs.anthropic.com/claude/docs/models-overview)
CLAUDE_MODEL=claude-3-5-sonnet-20241022

# Maximum tokens in response (higher = longer responses, higher cost)
CLAUDE_MAX_TOKENS=1000

# Temperature (0.0 = deterministic, 1.0 = creative)
CLAUDE_TEMPERATURE=0.7

# API timeout in milliseconds
CLAUDE_TIMEOUT=30000

# =============================================================================
# N8N CONFIGURATION
# =============================================================================
# n8n webhook base URL
N8N_WEBHOOK_URL=https://chat.lagencedescopines.com

# n8n editor URL
N8N_EDITOR_BASE_URL=https://chat.lagencedescopines.com/n8n

# n8n encryption key (generate with: openssl rand -hex 32)
N8N_ENCRYPTION_KEY=your-random-32-byte-hex-key

# =============================================================================
# OPTIONAL: REDIS (for advanced rate limiting)
# =============================================================================
# Uncomment if using Redis for rate limiting instead of Supabase
# REDIS_HOST=localhost
# REDIS_PORT=6379
# REDIS_PASSWORD=your-redis-password

# =============================================================================
# OPTIONAL: MONITORING
# =============================================================================
# Uncomment if using external monitoring
# SENTRY_DSN=https://xxxxx@sentry.io/xxxxx
# LOG_LEVEL=info

# =============================================================================
# DEPLOYMENT SETTINGS
# =============================================================================
# Environment (development, staging, production)
NODE_ENV=production

# Timezone
TZ=Europe/Paris

# =============================================================================
# WORKFLOW SETTINGS
# =============================================================================
# Loop detection threshold (number of user messages to trigger check)
LOOP_DETECTION_THRESHOLD=6

# Loop detection similarity score (0.0-1.0, higher = more similar required)
LOOP_SIMILARITY_THRESHOLD=0.8

# Conversation history limit (number of messages to load)
CONVERSATION_HISTORY_LIMIT=10

# =============================================================================
# CORS SETTINGS
# =============================================================================
# Allowed origins for CORS (use * for development, specific domains for production)
# Example for production: https://lagencedescopines.kajabi.com
CORS_ALLOWED_ORIGIN=*

# =============================================================================
# AGENT SETTINGS
# =============================================================================
# Default agent when no keywords match
DEFAULT_AGENT=creation

# Creation agent keywords (comma-separated)
CREATION_KEYWORDS=création,contenu,instagram,branding,post,réseaux sociaux,reels,stories,visuel,design

# Automation agent keywords (comma-separated)
AUTOMATION_KEYWORDS=automatisation,tunnel,vente,technique,email,funnel,automation,workflow,zapier,intégration

# =============================================================================
# PERFORMANCE TUNING
# =============================================================================
# PostgreSQL connection pool size
DB_POOL_SIZE=10

# Request timeout (ms)
REQUEST_TIMEOUT=120000

# Maximum concurrent executions
MAX_CONCURRENT_EXECUTIONS=10
