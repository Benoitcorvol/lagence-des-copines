# Guide Visuel - IntÃ©gration n8n Workflow

Guide pas Ã  pas avec descriptions visuelles pour intÃ©grer le workflow.

---

## ğŸ“ Ã‰tape 1: AccÃ©der Ã  n8n

### Ce que tu vas voir:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  n8n - Workflow Automation                          â”‚
â”‚                                                      â”‚
â”‚  Email:    [___________________________]            â”‚
â”‚  Password: [___________________________]            â”‚
â”‚                                                      â”‚
â”‚            [ Se connecter ]                         â”‚
â”‚                                                      â”‚
â”‚  Pas encore de compte? CrÃ©er un compte             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**URL**: `https://chat.lagencedescopines.com/n8n/`

**Action**: Se connecter ou crÃ©er un compte

---

## ğŸ“ Ã‰tape 2: Interface n8n

### Ce que tu vas voir aprÃ¨s connexion:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ n8n                                        benoit@... [â–¼]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚      â”‚                                                      â”‚
â”‚  ğŸ   â”‚  Bienvenue dans n8n!                                â”‚
â”‚      â”‚                                                      â”‚
â”‚  ğŸ“Š  â”‚  [+] CrÃ©er un nouveau workflow                      â”‚
â”‚      â”‚                                                      â”‚
â”‚  âš™ï¸  â”‚  Workflows rÃ©cents:                                 â”‚
â”‚      â”‚  (vide pour l'instant)                              â”‚
â”‚  ğŸ‘¤  â”‚                                                      â”‚
â”‚      â”‚                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Menu gauche:
ğŸ  = Home
ğŸ“Š = Workflows
âš™ï¸ = Settings
ğŸ‘¤ = User
```

**Actions**:
1. Cliquer sur âš™ï¸ **Settings** en bas Ã  gauche
2. Puis sur **Credentials**

---

## ğŸ“ Ã‰tape 3: Ajouter Credential Supabase

### Ã‰cran Settings â†’ Credentials:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Settings > Credentials                  [+ Add Credential] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  Rechercher credentials...  [________________] ğŸ”          â”‚
â”‚                                                             â”‚
â”‚  Vos credentials:                                          â”‚
â”‚  (vide)                                                    â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Actions**:
1. Cliquer **[+ Add Credential]**
2. Chercher "postgres"
3. SÃ©lectionner **Postgres**

### Formulaire Postgres:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Create New Credentials - Postgres                    [X]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  Credential Name:                                          â”‚
â”‚  [Supabase PostgreSQL________________________]             â”‚
â”‚                                                             â”‚
â”‚  Host:                                                     â”‚
â”‚  [db.tqwmtrhfzaugkrwjcofq.supabase.co_____]               â”‚
â”‚                                                             â”‚
â”‚  Database:                                                 â”‚
â”‚  [postgres__________________________________]              â”‚
â”‚                                                             â”‚
â”‚  User:                                                     â”‚
â”‚  [postgres__________________________________]              â”‚
â”‚                                                             â”‚
â”‚  Password:                                                 â”‚
â”‚  [â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢]              â”‚
â”‚                                                             â”‚
â”‚  Port:                                                     â”‚
â”‚  [5432______________________________________]              â”‚
â”‚                                                             â”‚
â”‚  SSL Mode: [require â–¼]                                    â”‚
â”‚                                                             â”‚
â”‚         [ Test ]          [ Save ]                         â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Actions**:
1. Remplir tous les champs
2. Cliquer **Test**
3. Attendre âœ… "Connection successful"
4. Cliquer **Save**

---

## ğŸ“ Ã‰tape 4: Ajouter Credential Claude API

### Rechercher Anthropic:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Create New Credentials                               [X]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  Rechercher credentials...  [anthropic_______] ğŸ”          â”‚
â”‚                                                             â”‚
â”‚  RÃ©sultats:                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚  â”‚ Anthropic Claude API       â”‚ â† Cliquer ici            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Formulaire Anthropic:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Create New Credentials - Anthropic Claude API        [X]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  Credential Name:                                          â”‚
â”‚  [Anthropic Claude API_______________________]             â”‚
â”‚                                                             â”‚
â”‚  API Key:                                                  â”‚
â”‚  [sk-ant-api03-â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢]              â”‚
â”‚                                                             â”‚
â”‚                                                             â”‚
â”‚                          [ Save ]                          â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Actions**:
1. Remplir Credential Name
2. Coller ta clÃ© API Claude (commence par `sk-ant-api03-`)
3. Cliquer **Save**

---

## ğŸ“ Ã‰tape 5: Importer le Workflow

### Retourner aux Workflows:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ n8n                                        benoit@... [â–¼]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚      â”‚  Workflows                          [+ Add â–¼]       â”‚
â”‚  ğŸ   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚      â”‚                                                      â”‚
â”‚  ğŸ“Š  â”‚  Vos workflows:                                     â”‚
â”‚      â”‚  (vide)                                             â”‚
â”‚  âš™ï¸  â”‚                                                      â”‚
â”‚      â”‚                                                      â”‚
â”‚  ğŸ‘¤  â”‚                                                      â”‚
â”‚      â”‚                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Actions**:
1. Cliquer sur ğŸ“Š **Workflows** (menu gauche)
2. Cliquer **[+ Add â–¼]** en haut Ã  droite

### Menu dÃ©roulant:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [+ Add â–¼]             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Create New Workflow    â”‚
â”‚ Import from URL        â”‚
â”‚ Import from File       â”‚ â† Cliquer ici
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### SÃ©lection fichier:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Choisir un fichier Ã  importer                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  ğŸ“ /Users/benoitcorvol/chatbot/chatbot/n8n-workflows/    â”‚
â”‚                                                             â”‚
â”‚  ğŸ“„ chatbot-message-processing.json  â† SÃ©lectionner       â”‚
â”‚  ğŸ“„ README.md                                              â”‚
â”‚  ğŸ“„ DEPLOYMENT.md                                          â”‚
â”‚  ğŸ“„ .env.example                                           â”‚
â”‚                                                             â”‚
â”‚                 [ Annuler ]    [ Ouvrir ]                  â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Actions**:
1. Naviguer vers le dossier `n8n-workflows`
2. SÃ©lectionner `chatbot-message-processing.json`
3. Cliquer **Ouvrir**

---

## ğŸ“ Ã‰tape 6: Workflow ImportÃ©

### Ce que tu vas voir:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Chatbot L'Agence des Copines          [ Save ] [Inactive â–¼]     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚ Webhook  â”‚â”€â”€â”€â”€â–¶â”‚ Validate â”‚â”€â”€â”€â”€â–¶â”‚Rate Limitâ”‚                â”‚
â”‚  â”‚ Trigger  â”‚     â”‚  Input   â”‚     â”‚  Check   â”‚                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                                           â”‚                       â”‚
â”‚                                           â–¼                       â”‚
â”‚                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚                                    â”‚  Load    â”‚                  â”‚
â”‚                                    â”‚ History  â”‚                  â”‚
â”‚                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                                           â”‚                       â”‚
â”‚                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚                        â–¼                                â–¼        â”‚
â”‚                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚                  â”‚Creation  â”‚                    â”‚Automationâ”‚   â”‚
â”‚                  â”‚  Agent   â”‚                    â”‚  Agent   â”‚   â”‚
â”‚                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                        â”‚                                â”‚        â”‚
â”‚                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                     â–¼                             â”‚
â”‚                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚                              â”‚ Claude   â”‚                        â”‚
â”‚                              â”‚   API    â”‚                        â”‚
â”‚                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚                                     â”‚                             â”‚
â”‚                                     â–¼                             â”‚
â”‚                              (+ 8 autres nÅ“uds)                  â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Tu verras**: 22 nÅ“uds interconnectÃ©s (peut-Ãªtre besoin de zoomer/dÃ©zoomer)

---

## ğŸ“ Ã‰tape 7: Lier les Credentials

### Cliquer sur un nÅ“ud PostgreSQL:

Par exemple: **Rate Limit Check**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Rate Limit Check                                      [X]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  âš ï¸ No credentials set                                     â”‚
â”‚                                                             â”‚
â”‚  Credentials:                                              â”‚
â”‚  [Select Credential... â–¼]                                  â”‚
â”‚                                                             â”‚
â”‚  Operation: Execute Query                                  â”‚
â”‚                                                             â”‚
â”‚  Query:                                                    â”‚
â”‚  [SELECT COUNT(*) as message_count FROM...]               â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Actions**:
1. Cliquer sur **[Select Credential... â–¼]**
2. SÃ©lectionner **Supabase PostgreSQL**
3. Le âš ï¸ disparaÃ®t

### RÃ©pÃ©ter pour chaque nÅ“ud PostgreSQL:

- âœ… Rate Limit Check
- âœ… Load Conversation History
- âœ… Save Conversation
- âœ… Save User Message
- âœ… Save Bot Message

### Cliquer sur le nÅ“ud Claude API:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Claude API Call                                       [X]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  âš ï¸ No credentials set                                     â”‚
â”‚                                                             â”‚
â”‚  Authentication:                                           â”‚
â”‚  [Predefined Credential Type â–¼]                           â”‚
â”‚                                                             â”‚
â”‚  Credential Type:                                          â”‚
â”‚  [Anthropic API â–¼]                                        â”‚
â”‚                                                             â”‚
â”‚  Credential for Anthropic API:                            â”‚
â”‚  [Anthropic Claude API â–¼]                                 â”‚
â”‚                                                             â”‚
â”‚  Method: POST                                              â”‚
â”‚  URL: https://api.anthropic.com/v1/messages               â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Actions**:
1. VÃ©rifier **Authentication**: Predefined Credential Type
2. VÃ©rifier **Credential Type**: Anthropic API
3. Dans **Credential for Anthropic API**: SÃ©lectionner **Anthropic Claude API**
4. Le âš ï¸ disparaÃ®t

---

## ğŸ“ Ã‰tape 8: Sauvegarder et Activer

### Sauvegarder:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Chatbot L'Agence des Copines          [ Save ] [Inactive â–¼]     â”‚
â”‚                                           â†‘                       â”‚
â”‚                                    Cliquer ici                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Action**: Cliquer **[ Save ]**

**RÃ©sultat**: Message "Workflow saved" apparaÃ®t en vert

### Activer:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Chatbot L'Agence des Copines          [ Save ] [Inactive â–¼]     â”‚
â”‚                                                    â†‘              â”‚
â”‚                                             Cliquer ici           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Action**: Cliquer sur **[Inactive â–¼]**

**Menu dÃ©roulant**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Inactive â–¼ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â— Active   â”‚ â† Cliquer ici
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**RÃ©sultat**: Toggle devient **[Active âœ“]** en vert

---

## ğŸ“ Ã‰tape 9: Obtenir l'URL du Webhook

### Cliquer sur le premier nÅ“ud (Webhook Trigger):

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Webhook Trigger                                       [X]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  HTTP Method: POST                                         â”‚
â”‚  Path: chat                                                â”‚
â”‚                                                             â”‚
â”‚  Production URL:                                           â”‚
â”‚  https://chat.lagencedescopines.com/webhook-test/          â”‚
â”‚  abc123-def456-ghi789-jkl012/chat                         â”‚
â”‚                      â†‘                                      â”‚
â”‚                   Copier cet ID                            â”‚
â”‚                                                             â”‚
â”‚  [Copy URL]                                                â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Action**:
1. Copier l'ID du workflow (partie entre `/webhook-test/` et `/chat`)
2. Exemple: `abc123-def456-ghi789-jkl012`
3. Garder cet ID pour l'Ã©tape suivante

---

## ğŸ“ Ã‰tape 10: Tester le Workflow

### Dans ton terminal (Mac):

```bash
curl -X POST https://chat.lagencedescopines.com/webhook/chat \
  -H "Content-Type: application/json" \
  -d '{
    "userId": "test-user",
    "conversationId": "test-conv",
    "message": "Comment crÃ©er du contenu Instagram?",
    "timestamp": "2025-11-03T12:00:00.000Z"
  }'
```

### RÃ©ponse attendue (aprÃ¨s 4-7 secondes):

```json
{
  "response": "Pour crÃ©er du contenu engageant sur Instagram, voici mes conseils...",
  "agentType": "creation",
  "conversationId": "test-conv",
  "timestamp": "2025-11-03T12:00:05.123Z",
  "loopDetected": false
}
```

### VÃ©rifier dans n8n:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ n8n                                        benoit@... [â–¼]        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚      â”‚  Executions                                               â”‚
â”‚  ğŸ   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚      â”‚                                                            â”‚
â”‚  ğŸ“Š  â”‚  âœ… Chatbot L'Agence... | Just now | Success | 5.2s      â”‚
â”‚      â”‚                                                            â”‚
â”‚  ğŸ“ˆ  â”‚  (Cliquer pour voir dÃ©tails)                              â”‚
â”‚      â”‚                                                            â”‚
â”‚  âš™ï¸  â”‚                                                            â”‚
â”‚      â”‚                                                            â”‚
â”‚  ğŸ‘¤  â”‚                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Actions**:
1. Cliquer sur ğŸ“ˆ **Executions** (menu gauche)
2. Voir l'exÃ©cution rÃ©cente avec âœ… Success
3. Cliquer dessus pour voir les dÃ©tails de chaque nÅ“ud

---

## ğŸ‰ C'est TerminÃ©!

### RÃ©sumÃ© de ce qui fonctionne maintenant:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                              â”‚
â”‚  Widget (navigateur)                                        â”‚
â”‚       â”‚                                                      â”‚
â”‚       â”‚ POST /webhook/chat                                  â”‚
â”‚       â–¼                                                      â”‚
â”‚  Nginx (VPS) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚       â”‚                             â”‚                        â”‚
â”‚       â–¼                             â”‚                        â”‚
â”‚  n8n Workflow                       â”‚                        â”‚
â”‚    â”œâ”€ Validation                    â”‚                        â”‚
â”‚    â”œâ”€ Rate Limiting                 â”‚                        â”‚
â”‚    â”œâ”€ Load History (Supabase)      â”‚                        â”‚
â”‚    â”œâ”€ Agent Router                  â”‚                        â”‚
â”‚    â”œâ”€ Claude API â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â†’ Anthropic          â”‚
â”‚    â”œâ”€ Loop Detection                â”‚                        â”‚
â”‚    â”œâ”€ Save Messages (Supabase) â”€â”€â”€â”€â”¼â”€â”€â†’ PostgreSQL         â”‚
â”‚    â””â”€ Return Response               â”‚                        â”‚
â”‚       â”‚                             â”‚                        â”‚
â”‚       â–¼                             â”‚                        â”‚
â”‚  Widget (reÃ§oit rÃ©ponse) â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Ce qui est actif:

- âœ… Webhook n8n en Ã©coute sur `/webhook/chat`
- âœ… Rate limiting (10 messages/minute)
- âœ… Dual-agent system (CrÃ©ation/Automation)
- âœ… Claude API intÃ©grÃ©
- âœ… Messages sauvegardÃ©s dans Supabase
- âœ… Performance <8 secondes

---

## ğŸ“ Checklist Finale

VÃ©rifie que tout est âœ…:

- [ ] n8n accessible via browser
- [ ] Credential Supabase crÃ©Ã©e et testÃ©e
- [ ] Credential Claude API crÃ©Ã©e
- [ ] Workflow importÃ© avec succÃ¨s
- [ ] Tous les nÅ“uds PostgreSQL liÃ©s Ã  Supabase credential
- [ ] NÅ“ud Claude API liÃ© Ã  Anthropic credential
- [ ] Workflow sauvegardÃ©
- [ ] Workflow activÃ© (toggle vert)
- [ ] Test curl rÃ©ussit avec rÃ©ponse JSON
- [ ] ExÃ©cution visible dans n8n Executions
- [ ] Messages visibles dans Supabase

**Si tous les âœ… sont cochÃ©s**: Le workflow est opÃ©rationnel! ğŸ‰

---

## ğŸ†˜ Aide Visuelle - OÃ¹ Trouver Quoi

### Dans n8n:

```
Menu Gauche:
ğŸ  Home       â†’ Dashboard principal
ğŸ“Š Workflows  â†’ Voir/crÃ©er workflows
ğŸ“ˆ Executions â†’ Historique des exÃ©cutions
âš™ï¸ Settings   â†’ Credentials, paramÃ¨tres
ğŸ‘¤ User       â†’ Profil, dÃ©connexion
```

### Dans Supabase:

```
Dashboard Project:
â”œâ”€ Table Editor    â†’ Voir tables (conversations, messages)
â”œâ”€ SQL Editor      â†’ ExÃ©cuter queries SQL
â”œâ”€ Database        â†’ Config, connection strings
â””â”€ Settings        â†’ API keys, password
```

### Dans le workflow n8n:

```
Toolbar en haut:
[ Save ]           â†’ Sauvegarder workflow
[Inactive/Active]  â†’ Activer/dÃ©sactiver
[Execute]          â†’ Tester manuellement
[...]              â†’ Plus d'options
```

---

VoilÃ ! Avec ce guide visuel, l'intÃ©gration devrait Ãªtre beaucoup plus claire. Si tu as des questions sur n'importe quelle Ã©tape, n'hÃ©site pas! ğŸš€
